<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!-- 基础颜色资源 -->
    <SolidColorBrush x:Key="PrimaryBrush" Color="#0078D4"/>
    <SolidColorBrush x:Key="PanelBackgroundBrush" Color="#F3F3F3"/>
    <SolidColorBrush x:Key="DividerBrush" Color="#E5E5E5"/>
    <SolidColorBrush x:Key="TextBrush" Color="#1A1A1A"/>
    <SolidColorBrush x:Key="SecondaryTextBrush" Color="#666666"/>
    <SolidColorBrush x:Key="RowHoverBrush" Color="#EAEAEA"/>
    <SolidColorBrush x:Key="RowSelectedBrush" Color="#E0E0E0"/>
    <FontFamily x:Key="PrimaryFontFamily">Segoe UI, Microsoft YaHei</FontFamily>
    <sys:Double x:Key="FontSizeNormal">14</sys:Double>

    <!-- DataGrid 基础样式 -->
    <Style TargetType="DataGrid">
        <Setter Property="FontFamily" Value="{StaticResource PrimaryFontFamily}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeNormal}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="GridLinesVisibility" Value="None"/>
        <Setter Property="RowBackground" Value="Transparent"/>
        <Setter Property="HeadersVisibility" Value="Column"/>
        <Setter Property="AutoGenerateColumns" Value="False"/>
        <Setter Property="CanUserReorderColumns" Value="True"/>
        <Setter Property="CanUserResizeColumns" Value="True"/>
        <Setter Property="CanUserSortColumns" Value="True"/>
        <Setter Property="SelectionMode" Value="Single"/>
        <Setter Property="SelectionUnit" Value="FullRow"/>
        <Setter Property="RowHeight" Value="36"/>
        <Setter Property="VirtualizingPanel.IsVirtualizing" Value="True"/>
        <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>
        <Setter Property="EnableRowVirtualization" Value="True"/>
    </Style>

    <!-- 列头样式 -->
    <Style TargetType="DataGridColumnHeader">
        <Setter Property="Background" Value="{StaticResource PanelBackgroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="12,4"/>
        <Setter Property="Height" Value="34"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DataGridColumnHeader">
                    <Grid>
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 行样式 -->
    <Style TargetType="DataGridRow">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Margin" Value="2,1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DataGridRow">
                    <Grid SnapsToDevicePixels="True">
                        <Border x:Name="SelectionIndicator"
                                Width="3"
                                Height="16"
                                Background="{StaticResource PrimaryBrush}"
                                CornerRadius="1.5"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Visibility="Collapsed"
                                Margin="4,0,0,0"/>

                        <Border x:Name="DGR_Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                Margin="12,0,4,0">
                            <DataGridCellsPresenter ItemsPanel="{TemplateBinding ItemsPanel}"
                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <!-- 变更高亮触发器 -->
                        <DataTrigger Binding="{Binding ChangeState}" Value="New">
                            <Setter TargetName="DGR_Border" Property="Background" Value="#E6F4EA"/> <!-- 淡绿 -->
                        </DataTrigger>
                        <DataTrigger Binding="{Binding ChangeState}" Value="Changed">
                            <Setter TargetName="DGR_Border" Property="Background" Value="#FFF4E5"/> <!-- 淡黄 -->
                        </DataTrigger>

                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="DGR_Border" Property="Background" Value="{StaticResource RowHoverBrush}"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="DGR_Border" Property="Background" Value="{StaticResource RowSelectedBrush}"/>
                            <Setter TargetName="SelectionIndicator" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 单元格样式 -->
    <Style TargetType="DataGridCell">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DataGridCell">
                    <Border Background="{TemplateBinding Background}" Padding="8,0">
                        <ContentPresenter VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
